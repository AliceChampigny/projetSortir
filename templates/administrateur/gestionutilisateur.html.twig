{% extends 'base.html.twig' %}

{% block body %}

    <h2>Gestion des utilisateurs</h2>

        <main>

        <form method="post" action="#" class="form">
            {{ form_start(registrationForm) }}
            <h1 class="title">Inscrire un utilisateur</h1>
            <div class="flex">
                <label>
            {{ form_row(registrationForm.nom) }}
                </label>
                <label>
            {{ form_row(registrationForm.prenom) }}
                </label>
                <label>
            {{ form_row(registrationForm.pseudo) }}
                </label>
            </div>
            <label>

            {{ form_row(registrationForm.email) }}
            </label>
            <label>
            {{ form_row(registrationForm.telephone) }}
            </label>
            <label>
            {{ form_row(registrationForm.campus) }}
            </label>
            <label>
            {{ form_row(registrationForm.plainPassword.first) }}
            </label>
            <label>
            {{ form_row(registrationForm.plainPassword.second) }}
            </label>
            <label>
                {{ form_widget(registrationForm.imageFile) }}
            </label>

            <div class="flex">
                <button type="submit" class="submit">Valider l'inscription</button>
                {{ form_end(registrationForm) }}
                <a href="{{ path('admin_accueil') }}">
                    <button class="submit">Retour</button>
                </a>
            </div>
            <label class="form">
                {{render(controller('App\\Controller\\UploadController::excelCommunesAction')) }}
            </label>
        </form>
</main>

             <table>
                 <thead>
                     <tr>
                         <th scope="col">Nom</th>
                         <th scope="col">Prénom</th>
                         <th scope="col">Pseudo</th>
                         <th scope="col">Email</th>
                         <th scope="col">Telephone</th>
                         <th scope="col">Campus</th>
                         <th scope="col">Statut</th>
                         <th scope="col">Administrateur</th>
                         <th scope="col">Action</th>
                     </tr>
                 </thead>
                 <tbody>
                 {% for participant in participants %}
                     <tr>
                         <td>{{ participant.nom }}</td>
                         <td>{{ participant.prenom }}</td>
                         <td>{{ participant.pseudo }}</td>
                         <td>{{ participant.email }}</td>
                         <td>{{ participant.telephone }}</td>
                         <td>{{ participant.campus.nom }}</td>
                         <td>{% if participant.actif == 1 %}
                             Actif
                             {% endif %}
                             {% if participant.actif == 0 %}
                                 Inactif
                             {% endif %}
                         </td>
                         <td>{% if participant.administrateur == 1 %}
                                 X
                             {% endif %}
                         </td>
                         <td>{% if participant.actif == 1 %}
                                     <a href="{{path('admin_statut', {'participant' : participant.id}) }}">Désactiver le compte</a>
                             {% else %}
                                     <a href="{{path('admin_statut', {'participant' : participant.id}) }}">Activer le compte</a>
                             {% endif %}
                         <a href="{{path('admin_supprimer', {'participant' : participant.id}) }}">Supprimer le compte</a>

                         </td>
                     </tr>
                 {% endfor %}
                 <a href="{{path('app_test_upload')}}">Importer un fichier</a>
                 </tbody>
             </table>
{% endblock %}

