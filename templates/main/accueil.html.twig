{% extends 'base.html.twig' %}

 {% block body %}

     {% if app.user %}

<body>
         <div class="form2">
             {{ form_start(formFilterSortie) }}
             <p class="title">Filtrer vos recherches</p>

                 <label class="flex">
                     {{ form_widget(formFilterSortie.keyWord) }}

                     {{ form_widget(formFilterSortie.campus) }}
                     <label>
                         {{ form_widget(formFilterSortie.dateDebut) }}
                         {{ form_widget(formFilterSortie.dateFin) }}
                     </label>
                     <br>
                     <label class="flex">
                         {{ form_widget(formFilterSortie.organisateurSorties) }}
                         {{ form_widget(formFilterSortie.inscritSorties) }}

                         {{ form_widget(formFilterSortie.nonInscritSorties) }}
                         {{ form_widget(formFilterSortie.sortiesPassees) }}
                     </label>
                 </label>
             <br>

             <div class="flex">
                 <button type="submit" class="submit">Rechercher</button>
             </div>
             <br>
             <div class="flex">

                 {% for label, messages in app.flashes(['success', 'danger']) %}
                     {% for message in messages %}
                         <div class="alert alert-{{ label }} text-center" role="alert">
                             {{ message }}
                         </div>
                     {% endfor %}
                 {% endfor %}
             </div>
             {{ form_end(formFilterSortie) }}
         </div>
</body>


         <h2 class="title">Nos sorties</h2>
         <div class="liste_sorties">
             {% for sortie in sorties %}
                 <a href="{{ path('sortie_affichersortie', {'sortie' : sortie.id}) }}">
                     {% if sortie.participants.contains(app.user) %}
                 <div class="non-inscrit">
                     <img
                             class="carousel-item__img"
                             {% if sortie.nomImageSortie != null %}
                                 src="{{ asset('img/profil/'~sortie.nomImageSortie) }}"
                             {% else %}
                                 src="https://images.pexels.com/photos/708392/pexels-photo-708392.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                             {% endif %}
                             alt="image_sortie"
                     />
                     <div class="carousel-item__details">

                         <div class="controls">     </div>
                         <h5 class="carousel-item__details--title">{{ sortie.nom }}</h5>
                         <h6 class="carousel-item__details--subtitle"><a href="{{ path('participant_afficherprofil',{'id':sortie.organisateur.id}) }}" style="color:white;">Organisateur(rice) : {{ sortie.organisateur.pseudo }}</a></h6>
                         <h6 class="carousel-item__details--subtitle">Le {{ sortie.dateHeureDebut | date('d/m/Y H:i') }}</h6>
                         <h6 class="carousel-item__details--subtitle">Clotûre inscription le {{ sortie.dateLimiteInscription | date('d/m/Y H:i') }}</h6>
                         <h6 class="carousel-item__details--subtitle">Inscrits/Places : {{ sortie.participants | length }} /{{ sortie.nbInscriptionsMax }}</h6>
                         <h6 class="carousel-item__details--subtitle">Etat : {{ sortie.etat.libelle }}</h6>
                     </div>



                                    {% else %}
                                     <div class="carousel-item">
                                         <img
                                                 class="carousel-item__img"
                                                 src="https://images.pexels.com/photos/708392/pexels-photo-708392.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
                                                 alt="people"
                                         />
                                         <div class="carousel-item__details">

                                             <div class="controls">     </div>
                                             <h5 class="carousel-item__details--title">{{ sortie.nom }}</h5>
                                             <h6 class="carousel-item__details--subtitle"><a href="{{ path('participant_afficherprofil',{'id':sortie.organisateur.id}) }}" style="color:white;">Organisateur(rice) : {{ sortie.organisateur.pseudo }}</a></h6>
                                             <h6 class="carousel-item__details--subtitle">Le {{ sortie.dateHeureDebut | date('d/m/Y H:i') }}</h6>
                                             <h6 class="carousel-item__details--subtitle">Clotûre inscription le {{ sortie.dateLimiteInscription | date('d/m/Y H:i') }}</h6>
                                             <h6 class="carousel-item__details--subtitle">Inscrits/Places : {{ sortie.participants | length }} /{{ sortie.nbInscriptionsMax }}</h6>
                                             <h6 class="carousel-item__details--subtitle">Etat : {{ sortie.etat.libelle }}</h6>
                                         </div>
                             {% endif %}



                 </div></a>

             {% endfor %}
         </div>
     {% endif %}

     {% if not app.user %}
         <h1>Bienvenue sur les sorties enitiennes.com !!</h1>
     {% endif %}
     <div class="background"></div>
     <div class="background-texture"></div>

 {% endblock %}